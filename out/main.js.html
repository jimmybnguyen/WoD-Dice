<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: main.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: main.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
* Rolls a ten-sided dice in the pool
* @returns {number} the dice roll
*/
function rollDie () {
  return Math.ceil(Math.random() * 10)
}

/**
* Creates a pool object with dices, weak, and rerollOn variables
*/
Pool = function() {
  this.dices = 0
  this.weak = false
  this.rerollOn = 10

  if (typeof arguments[0] === "number") {
    this.dices = parseInt(arguments[0], 10)
  }
  if (typeof arguments[0] === "object") {
    var config = arguments[0]

    this.dices    = config.dices || this.dices
    this.weak     = config.weak || this.weak
    this.rerollOn = config.rerollOn || this.rerollOn
  }
};

/**
* Adds dices to the pool
* @alias addDice
* @param {number} dices the number of dices to be added
* @returns {object} the new amount of dices
*/
Pool.prototype.addDice = function (dices) {
  this.dices = this.dices + parseInt(dices, 10)

  return this;
};

/**
* Remove dices from the pool
* @alias removeDice
* @param {number} dices the number of dices to be added
* @return {object} the new amount of dices
*/
Pool.prototype.removeDice = function (dices) {
  this.dices = this.dices - parseInt(dices, 10)

  return this;
};

/**
* Remove dices from the pool which depends on the penalty factor 
* @alias penalty
* @param {number} dices the number of dices to be removed
* @returns {object} the new amount of dices
*/
Pool.prototype.penalty = function (penalty) {
  return this.removeDice(penalty)
};

/**
* Changes the character rolls to be weak
* @alias isWeak
* @returns {boolean} true
*/
Pool.prototype.isWeak = function () {
  this.weak = true

  return this;
};

/**
* Changes the rerollOn value
* @alias reroll
* @param {number} threshold the number to change the reroll number to
* @returns {object} the new reroll number
*/
Pool.prototype.reroll = function (threshold) {
  this.rerollOn = parseInt(threshold, 10)

  return this;
};

/**
* Checks to see if the roll will be a chance roll, which is when the character has no skills of modifiers in the particular area 
* @returns {boolean} true if the number of dices is less than 1, false otherwise
*/
Pool.prototype.isChanceRoll = function () {
  return (this.dices &lt; 1)
}

/**
* Rolls all of the dices in the pool
* @alias roll
* @returns {number} the number of sucessfull rolls 
*/
Pool.prototype.roll = function () {
  var successes = 0,
      roll;

  if (this.isChanceRoll()) {
    while (true) {
      roll = rollDie()

      if (roll === 10) {
        successes++
      } else if(roll === 1) {
        successes--
      }
      if (this.weak || roll &lt; 10) {
        break
      }
    }
  } else {
    // Rolls every dice in the pool 
    for (var i = 0; i &lt; this.dices; i++) {
      roll = rollDie()

      if (roll >= 8) {
        successes++
      }
        
      // Adds one more dice in the pool for another chance of a successful roll
      if (!this.weak &amp;&amp; roll >= this.rerollOn) {
        this.dices++
      }
      if (this.weak &amp;&amp; roll === 1) {
        successes--
      }
    }
  }

  return (this.isChanceRoll()) ? successes : Math.max(0, successes);
};

exports.Pool = Pool;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#addDice">addDice</a></li><li><a href="global.html#isWeak">isWeak</a></li><li><a href="global.html#penalty">penalty</a></li><li><a href="global.html#Pool">Pool</a></li><li><a href="global.html#removeDice">removeDice</a></li><li><a href="global.html#reroll">reroll</a></li><li><a href="global.html#roll">roll</a></li><li><a href="global.html#rollDie">rollDie</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Tue Jan 19 2016 20:09:43 GMT-0800 (Pacific Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
